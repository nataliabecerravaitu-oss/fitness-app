<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Elite Cisne PRO</title>

<style>
body{margin:0;font-family:Arial;background:#000;color:gold;}
header{text-align:center;padding:15px;font-size:22px;font-weight:bold;}
.screen{display:none;padding:20px;padding-bottom:120px;}
.active{display:block;}
.navbar{
position:fixed;bottom:0;width:100%;
background:#111;display:flex;justify-content:space-around;
padding:10px 0;border-top:2px solid gold;}
.navbar div{cursor:pointer;font-size:20px;}
.card{background:#111;padding:15px;margin:10px 0;border-radius:10px;}
button{background:gold;color:black;border:none;padding:6px 10px;margin:5px;border-radius:6px;font-weight:bold;cursor:pointer;}
input{margin:5px;padding:5px;border-radius:5px;border:none;}
.progress{height:18px;background:#333;border-radius:10px;overflow:hidden;margin-top:5px;}
.fill{height:100%;background:gold;width:0%;}
.small{font-size:12px;color:#aaa;}
</style>
</head>
<body>

<header>üî• Elite Cisne PRO</header>

<div id="inicio" class="screen active">
<h2>Inicio</h2>
<input type="date" id="fechaSelector">
<div id="resumen" class="card"></div>

<div class="card">
<h3>üíß Agua</h3>
<div class="progress"><div id="aguaBar" class="fill"></div></div>
<button onclick="agregarAgua()">+250ml</button>
</div>

<div class="card">
<h3>‚öñ Peso corporal</h3>
<input type="number" id="pesoInput" placeholder="kg" min="0" step="0.1">
<button onclick="guardarPeso()">Guardar</button>
<div id="pesoHistorial" class="small"></div>
</div>
</div>

<div id="nutricion" class="screen">
<h2>Nutrici√≥n</h2>
<div id="alimentosBotones"></div>
<div class="card">
<h3>Alimentos de hoy</h3>
<div id="listaAlimentos"></div>
</div>
</div>

<div id="ejercicio" class="screen">
<h2>Rutina del d√≠a</h2>
<div id="rutinaBox"></div>
</div>

<div id="estadisticas" class="screen">
<h2>Estad√≠sticas</h2>
<div id="estadisticasBox" class="card"></div>
</div>

<div class="navbar">
<div onclick="mostrar('inicio')">üè†</div>
<div onclick="mostrar('nutricion')">üçΩ</div>
<div onclick="mostrar('ejercicio')">üèãÔ∏è</div>
<div onclick="mostrar('estadisticas')">üìä</div>
</div>

<script>

/* ================== CONFIG ================== */

const META_CAL = 3400;
const META_PROT = 170;
const META_AGUA = 3000;

/* ================== STORAGE ================== */

let historial = JSON.parse(localStorage.getItem("historial")) || {};
let historialEj = JSON.parse(localStorage.getItem("historialEj")) || {};
let historialPeso = JSON.parse(localStorage.getItem("historialPeso")) || {};

let fechaActual = new Date().toISOString().split("T")[0];
document.getElementById("fechaSelector").value = fechaActual;

if(!historial[fechaActual]) crearDia(fechaActual);

/* ================== UTIL ================== */

function clamp(value,min,max){
return Math.max(min,Math.min(max,value));
}

function guardarTodo(){
localStorage.setItem("historial",JSON.stringify(historial));
localStorage.setItem("historialEj",JSON.stringify(historialEj));
localStorage.setItem("historialPeso",JSON.stringify(historialPeso));
}

/* ================== FECHA ================== */

document.getElementById("fechaSelector").addEventListener("change",e=>{
fechaActual = e.target.value;
if(!historial[fechaActual]) crearDia(fechaActual);
render();
});

function crearDia(fecha){
historial[fecha] = {
cal:0, prot:0, carb:0, grasa:0, agua:0, alimentos:[]
};
guardarTodo();
}

/* ================== NAVEGACI√ìN ================== */

function mostrar(id){
document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
render();
}

/* ================== RESUMEN ================== */

function renderResumen(){
const d = historial[fechaActual];

const calPct = clamp((d.cal/META_CAL)*100,0,100);
const protPct = clamp((d.prot/META_PROT)*100,0,100);
const aguaPct = clamp((d.agua/META_AGUA)*100,0,100);

document.getElementById("resumen").innerHTML = `
üî• ${d.cal}/${META_CAL} cal
<div class="progress"><div class="fill" style="width:${calPct}%"></div></div>
üí™ ${d.prot}/${META_PROT} g
<div class="progress"><div class="fill" style="width:${protPct}%"></div></div>
`;

document.getElementById("aguaBar").style.width = aguaPct+"%";
}

/* ================== AGUA ================== */

function agregarAgua(){
historial[fechaActual].agua += 250;
guardarTodo();
renderResumen();
}

/* ================== PESO ================== */

function guardarPeso(){
const val = parseFloat(document.getElementById("pesoInput").value);
if(isNaN(val) || val <= 0) return;

historialPeso[fechaActual] = val;
guardarTodo();
renderPeso();
}

function renderPeso(){
let fechas = Object.keys(historialPeso).sort();
let html="";
fechas.forEach(f=>{
html += `${f}: ${historialPeso[f]} kg<br>`;
});
document.getElementById("pesoHistorial").innerHTML = html;
}

/* ================== NUTRICI√ìN ================== */

const alimentos = [
{n:"Huevo",c:70,p:6,carb:0,g:5},
{n:"Pollo 100g",c:165,p:31,carb:0,g:4},
{n:"Arroz 100g",c:130,p:2,carb:28,g:0},
{n:"Banana",c:105,p:1,carb:27,g:0},
{n:"Aceite oliva",c:120,p:0,carb:0,g:14}
];

function renderAlimentosBotones(){
let html="";
alimentos.forEach((a,i)=>{
html+=`<button onclick="agregarAlimento(${i})">${a.n}</button>`;
});
document.getElementById("alimentosBotones").innerHTML=html;
}

function agregarAlimento(index){
const a = alimentos[index];
const d = historial[fechaActual];

d.cal += a.c;
d.prot += a.p;
d.carb += a.carb;
d.grasa += a.g;
d.alimentos.push({...a});

guardarTodo();
render();
}

function eliminarAlimento(index){
const d = historial[fechaActual];
const a = d.alimentos[index];

d.cal -= a.c;
d.prot -= a.p;
d.carb -= a.carb;
d.grasa -= a.g;

d.cal = Math.max(0,d.cal);
d.prot = Math.max(0,d.prot);
d.carb = Math.max(0,d.carb);
d.grasa = Math.max(0,d.grasa);

d.alimentos.splice(index,1);
guardarTodo();
render();
}

function renderListaAlimentos(){
const d = historial[fechaActual];
let html="";
d.alimentos.forEach((a,i)=>{
html+=`${a.n} <button onclick="eliminarAlimento(${i})">‚ùå</button><br>`;
});
document.getElementById("listaAlimentos").innerHTML=html;
}

/* ================== RUTINA ================== */

const rutinaSemana = {
0:["Descanso"],
1:["Press_banca","Fondos","Aperturas"],
2:["Espalda_barra","Dominadas","Remo"],
3:["Sentadilla","Prensa","Peso_muerto"],
4:["Press_militar","Elevaciones","Pajaros"],
5:["Curl_biceps","Triceps_polea","Martillo"],
6:["Full_body_ligero"]
};

function renderRutina(){
let dia = new Date(fechaActual+"T00:00:00").getDay();
let rutina = rutinaSemana[dia] || [];
let html="";

rutina.forEach(nombre=>{
if(nombre==="Descanso"){
html+=`<div class="card">D√≠a de descanso</div>`;
return;
}

if(!historialEj[nombre]) historialEj[nombre]=[];

let ultimo = historialEj[nombre].slice(-1)[0];

html+=`
<div class="card">
<b>${nombre.replaceAll("_"," ")}</b><br>
<input type="number" id="peso_${nombre}" placeholder="Peso" min="0">
<input type="number" id="reps_${nombre}" placeholder="Reps" min="0">
<button onclick="guardarEjercicio('${nombre}')">Guardar</button>
<div class="small">
√öltimo: ${ultimo ? ultimo.peso+"kg x "+ultimo.reps : "-"}
</div>
</div>
`;
});

document.getElementById("rutinaBox").innerHTML=html;
}

function guardarEjercicio(nombre){
const peso = parseFloat(document.getElementById("peso_"+nombre).value);
const reps = parseInt(document.getElementById("reps_"+nombre).value);

if(isNaN(peso) || isNaN(reps) || peso<=0 || reps<=0) return;

if(!historialEj[nombre]) historialEj[nombre]=[];

historialEj[nombre].push({
fecha:fechaActual,
peso,
reps
});

guardarTodo();
renderRutina();
}

/* ================== ESTAD√çSTICAS ================== */

function renderStats(){
let dias = Object.keys(historial);
let totalCal = dias.reduce((acc,f)=>acc+historial[f].cal,0);
let promedio = dias.length ? Math.round(totalCal/dias.length) : 0;

document.getElementById("estadisticasBox").innerHTML = `
D√≠as registrados: ${dias.length}<br>
Calor√≠as totales: ${totalCal}<br>
Promedio diario: ${promedio}
`;
}

/* ================== RENDER GLOBAL ================== */

function render(){
renderResumen();
renderAlimentosBotones();
renderListaAlimentos();
renderRutina();
renderStats();
renderPeso();
}

render();

</script>
</body>
</html>
