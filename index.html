<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Elite Cisne</title>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:black;
    color:gold;
    position: relative;
    background-size: cover;
    background-position: center;
    transition: background 1s ease-in-out;
}
body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.3);
    z-index: 0;
    pointer-events: none;
}
header{
    text-align:center;
    padding:15px;
    font-size:22px;
    font-weight:bold;
}
.screen{
    display:none;
    padding:20px;
    padding-bottom:100px;
}
.active{
    display:block;
}
.navbar{
    position:fixed;
    bottom:0;
    width:100%;
    background:#111;
    display:flex;
    justify-content:space-around;
    padding:10px 0;
    border-top:2px solid gold;
}
.navbar div{
    cursor:pointer;
    font-size:20px;
}
button{
    background:gold;
    color:black;
    border:none;
    padding:8px;
    margin:5px;
    border-radius:8px;
    font-weight:bold;
    cursor:pointer;
}
.card{
    background:#111;
    padding:15px;
    margin:10px 0;
    border-radius:10px;
}
input[type="number"]{
    width:60px;
}
.progress{
    height:20px;
    background:#333;
    border-radius:10px;
    overflow:hidden;
    margin-top:5px;
}
.progress-fill{
    height:100%;
    background:gold;
    width:0%;
    transition: width 0.3s;
}
</style>
</head>

<body>
<header>üî• Elite Cisne</header>

<div id="inicio" class="screen active">
    <h2>üè† Inicio</h2>
    <div id="climaBox" class="card"></div>
    <div id="resumenDiario" class="card"></div>
    <div class="card">
        <h3>üíß Agua diaria</h3>
        <div id="aguaBox" class="progress"><div id="aguaFill" class="progress-fill"></div></div>
        <button onclick="tomarAgua()">Agregar vaso</button>
    </div>
</div>

<div id="nutricion" class="screen">
    <h2>üçΩ Nutrici√≥n</h2>
    <div id="nutricionContenido"></div>
</div>

<div id="ejercicio" class="screen">
    <h2>üèãÔ∏è Ejercicio</h2>
    <div id="ejercicioContenido"></div>
</div>

<div id="motivacion" class="screen">
    <h2>üß† Motivaci√≥n</h2>
    <div id="fraseMotivacion" class="card"></div>
</div>

<div id="estadisticas" class="screen">
    <h2>üìä Estad√≠sticas Semanales</h2>
    <div id="estadisticasContenido" class="card"></div>
</div>

<div class="navbar">
    <div onclick="showScreen('inicio')">üè†</div>
    <div onclick="showScreen('nutricion')">üçΩ</div>
    <div onclick="showScreen('ejercicio')">üèãÔ∏è</div>
    <div onclick="showScreen('motivacion')">üß†</div>
    <div onclick="showScreen('estadisticas')">üìä</div>
</div>

<script>

let metaCalorias = 3400;
let metaProteina = 170;
let metaAgua = 3000;

let hoy = new Date().toISOString().split("T")[0];

let historial = JSON.parse(localStorage.getItem("historialCompleto")) || {};
let registroEjercicios = JSON.parse(localStorage.getItem("registroEjercicios")) || {};
let rutinaDelDia = JSON.parse(localStorage.getItem("rutinaDelDia")) || {};

if(!historial[hoy]){
    historial[hoy] = {calorias:0,proteina:0,carbs:0,grasas:0,agua:0,alimentos:[]};
}

let datosHoy = historial[hoy];
let historialAlimentos = datosHoy.alimentos;

const climaBox = document.getElementById("climaBox");

async function actualizarClima(){
    try{
        const lat = -34.9011, lon = -56.1645;
        const apiKey = "ec3ea0af99e26dc4338f449647f4644a";
        const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&lang=es&appid=${apiKey}`);
        const data = await res.json();
        const clima = data.weather[0].main;
        const temp = Math.round(data.main.temp);
        climaBox.innerHTML = `üå° ${temp}¬∞C - ${clima}`;
    }catch(e){
        climaBox.innerHTML = "üå° Clima no disponible";
    }
}
actualizarClima();

function showScreen(id){
    document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
    if(id==="ejercicio") cargarEjercicios();
}

function actualizarResumenInicio(){
    const box = document.getElementById("resumenDiario");
    box.innerHTML = `
        <h3>üìä Resumen Diario</h3>
        Calor√≠as: ${datosHoy.calorias}/${metaCalorias}<br>
        Prote√≠na: ${datosHoy.proteina}g/${metaProteina}g<br>
        Agua: ${datosHoy.agua}ml/${metaAgua}ml
    `;
    document.getElementById("aguaFill").style.width =
        Math.min(100,(datosHoy.agua/metaAgua*100))+"%";
}

function tomarAgua(){
    datosHoy.agua += 250;
    historial[hoy]=datosHoy;
    localStorage.setItem("historialCompleto",JSON.stringify(historial));
    actualizarResumenInicio();
}

const diasEntreno={
    lunes:{principal:"pecho",secundario:"triceps"},
    martes:{principal:"espalda",secundario:"biceps"},
    jueves:{principal:"piernas",secundario:"hombros"},
    viernes:{principal:"core",secundario:"abdominales"},
    sabado:{principal:"cardio",secundario:""}
};

const ejerciciosPorMusculo={
    pecho:["Press barra","Press mancuernas","Aperturas mancuernas","Fondos paralelas","Press inclinado"],
    triceps:["Polea alta","Extensiones manc","Fondos banco","Press franc√©s barra","Cuerda polea"],
    espalda:["Remo barra","Remo manc","Jal√≥n al pecho","Peso muerto","Pull-over manc"],
    biceps:["Curl barra","Curl manc","Curl martillo","Curl predicador","Curl concentrado"],
    piernas:["Sentadilla","Prensa","Zancadas","Peso muerto piernas r√≠gidas","Extensi√≥n pierna"],
    hombros:["Press militar barra","Elevaciones laterales","Elevaciones frontales","P√°jaros","Arnold press"],
    abdominales:["Crunch","Elevaci√≥n piernas","Plancha","Bicicleta","Russian twist"],
    core:["Plancha","Crunch","Bicicleta","Elevaci√≥n piernas","Russian twist"],
    cardio:["Cinta","Bicicleta","El√≠ptica","Saltos cuerda"]
};

function obtenerDiaActual(){
    const dias=["domingo","lunes","martes","mi√©rcoles","jueves","viernes","s√°bado"];
    return dias[new Date().getDay()];
}

function seleccionarEjercicios(musculo){
    if(!ejerciciosPorMusculo[musculo]) return [];
    const lista=ejerciciosPorMusculo[musculo];
    let seleccion=[];
    while(seleccion.length<Math.min(3,lista.length)){
        const index=Math.floor(Math.random()*lista.length);
        if(!seleccion.includes(lista[index])) seleccion.push(lista[index]);
    }
    return seleccion;
}

function cargarEjercicios(){
    const cont=document.getElementById("ejercicioContenido");
    const dia=obtenerDiaActual();

    if(!diasEntreno[dia]){
        cont.innerHTML="<h3>Descanso hoy üòå</h3>";
        return;
    }

    const fechaHoy = new Date().toISOString().split("T")[0];
    const {principal,secundario}=diasEntreno[dia];

    if(!rutinaDelDia[fechaHoy]){
        rutinaDelDia[fechaHoy]={
            principal: seleccionarEjercicios(principal),
            secundario: secundario ? seleccionarEjercicios(secundario) : []
        };
        localStorage.setItem("rutinaDelDia",JSON.stringify(rutinaDelDia));
    }

    const ejPrincipal=rutinaDelDia[fechaHoy].principal;
    const ejSecundario=rutinaDelDia[fechaHoy].secundario;

    let html=`<h3>üí™ ${dia.toUpperCase()}</h3>`;

    function bloque(musculo,ejercicios){
        let b=`<h4>${musculo.toUpperCase()}</h4>`;
        ejercicios.forEach(ej=>{
            const key=`${dia}|${musculo}|${ej}`;
            const reg=registroEjercicios[key]||{hecho:false,peso:"",reps:""};
            b+=`<div class="card"><b>${ej}</b><br>
            Peso:<input type="number" id="peso_${key}" value="${reg.peso}" placeholder="kg">
            Reps:<input type="number" id="reps_${key}" value="${reg.reps}" placeholder="rep">
            <button onclick="guardarEjercicio('${key}')">Guardar</button>
            </div>`;
        });
        return b;
    }

    html += bloque(principal,ejPrincipal);
    if(secundario) html += bloque(secundario,ejSecundario);

    cont.innerHTML = html;
}

function guardarEjercicio(key){
    const peso=document.getElementById("peso_"+key).value;
    const reps=document.getElementById("reps_"+key).value;
    registroEjercicios[key]={hecho:true,peso:peso||"",reps:reps||""};
    localStorage.setItem("registroEjercicios",JSON.stringify(registroEjercicios));
    alert("‚úÖ Ejercicio guardado");
}

actualizarResumenInicio();
</script>
</body>
</html>
