<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Elite Cisne PRO</title>

<style>
body{margin:0;font-family:Arial;background:#000;color:gold;}
header{text-align:center;padding:15px;font-size:22px;font-weight:bold;}
.screen{display:none;padding:20px;padding-bottom:120px;}
.active{display:block;}
.navbar{
position:fixed;bottom:0;width:100%;
background:#111;display:flex;justify-content:space-around;
padding:10px 0;border-top:2px solid gold;}
.navbar div{cursor:pointer;font-size:20px;}
.card{background:#111;padding:15px;margin:10px 0;border-radius:10px;}
button{background:gold;color:black;border:none;padding:6px 10px;margin:5px;border-radius:6px;font-weight:bold;cursor:pointer;}
input{margin:5px;padding:5px;border-radius:5px;border:none;}
.progress{height:18px;background:#333;border-radius:10px;overflow:hidden;margin-top:5px;}
.fill{height:100%;background:gold;width:0%;}
.small{font-size:12px;color:#aaa;}
</style>
</head>
<body>

<header>üî• Elite Cisne PRO</header>

<div id="inicio" class="screen active">
<h2>Inicio</h2>
<input type="date" id="fechaSelector">
<div id="resumen" class="card"></div>

<div class="card">
<h3>üíß Agua</h3>
<div class="progress"><div id="aguaBar" class="fill"></div></div>
<button onclick="agregarAgua()">+250ml</button>
</div>

<div class="card">
<h3>‚öñ Peso corporal</h3>
<input type="number" id="pesoInput" placeholder="kg" min="0" step="0.1">
<button onclick="guardarPeso()">Guardar</button>
<div id="pesoHistorial" class="small"></div>
</div>
</div>

<div id="nutricion" class="screen">
<h2>Nutrici√≥n</h2>
<div id="alimentosBotones"></div>
<div class="card">
<h3>Alimentos de hoy</h3>
<div id="listaAlimentos"></div>
</div>
</div>

<div id="ejercicio" class="screen">
<h2>Rutina del d√≠a</h2>
<div id="rutinaBox"></div>
</div>

<div id="estadisticas" class="screen">
<h2>Estad√≠sticas</h2>
<div id="estadisticasBox" class="card"></div>
</div>

<div class="navbar">
<div onclick="mostrar('inicio')">üè†</div>
<div onclick="mostrar('nutricion')">üçΩ</div>
<div onclick="mostrar('ejercicio')">üèãÔ∏è</div>
<div onclick="mostrar('estadisticas')">üìä</div>
</div>

<script>
/* ================== CONFIG ================== */
const META_CAL = 3400;
const META_PROT = 170;
const META_AGUA = 3000;

/* ================== STORAGE ================== */
let historial = JSON.parse(localStorage.getItem("historial")) || {};
let historialEj = JSON.parse(localStorage.getItem("historialEj")) || {};
let historialPeso = JSON.parse(localStorage.getItem("historialPeso")) || {};
let rutinaDia = JSON.parse(localStorage.getItem("rutinaDia")) || {};

let fechaActual = new Date().toISOString().split("T")[0];
document.getElementById("fechaSelector").value = fechaActual;
if(!historial[fechaActual]) crearDia(fechaActual);

/* ================== UTIL ================== */
function clamp(value,min,max){ return Math.max(min,Math.min(max,value)); }
function guardarTodo(){
    localStorage.setItem("historial",JSON.stringify(historial));
    localStorage.setItem("historialEj",JSON.stringify(historialEj));
    localStorage.setItem("historialPeso",JSON.stringify(historialPeso));
    localStorage.setItem("rutinaDia",JSON.stringify(rutinaDia));
}

/* ================== FECHA ================== */
document.getElementById("fechaSelector").addEventListener("change",e=>{
    fechaActual = e.target.value;
    if(!historial[fechaActual]) crearDia(fechaActual);
    render();
});
function crearDia(fecha){
    historial[fecha] = {cal:0, prot:0, carb:0, grasa:0, agua:0, alimentos:[]};
    guardarTodo();
}

/* ================== NAVEGACI√ìN ================== */
function mostrar(id){
    document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
    render();
}

/* ================== RESUMEN ================== */
function renderResumen(){
    const d = historial[fechaActual];
    const calPct = clamp((d.cal/META_CAL)*100,0,100);
    const protPct = clamp((d.prot/META_PROT)*100,0,100);
    const aguaPct = clamp((d.agua/META_AGUA)*100,0,100);

    document.getElementById("resumen").innerHTML = `
üî• ${d.cal}/${META_CAL} cal
<div class="progress"><div class="fill" style="width:${calPct}%"></div></div>
üí™ ${d.prot}/${META_PROT} g
<div class="progress"><div class="fill" style="width:${protPct}%"></div></div>
`;
    document.getElementById("aguaBar").style.width = aguaPct+"%";
}

/* ================== AGUA ================== */
function agregarAgua(){ historial[fechaActual].agua += 250; guardarTodo(); renderResumen(); }

/* ================== PESO ================== */
function guardarPeso(){
    const val = parseFloat(document.getElementById("pesoInput").value);
    if(isNaN(val) || val <=0) return;
    historialPeso[fechaActual] = val;
    guardarTodo();
    renderPeso();
}
function renderPeso(){
    let fechas = Object.keys(historialPeso).sort();
    let html="";
    fechas.forEach(f=>{html+=`${f}: ${historialPeso[f]} kg<br>`});
    document.getElementById("pesoHistorial").innerHTML = html;
}

/* ================== NUTRICI√ìN ================== */
const categorias = {
Proteinas: [
{n:"Pollo pechuga 100g", c:165, p:31, carb:0, g:3.6},
{n:"Carne magra 100g", c:250, p:26, carb:0, g:15},
{n:"Carne picada 100g", c:254, p:17, carb:0, g:20},
{n:"Pescado blanco 100g", c:96, p:20, carb:0, g:2},
{n:"At√∫n 100g", c:132, p:28, carb:0, g:1},
{n:"Huevo (1 unidad)", c:70, p:6, carb:0.6, g:5},
{n:"Clara de huevo", c:17, p:3.6, carb:0.2, g:0}
],
Carbohidratos: [
{n:"Arroz blanco 100g", c:130, p:2.4, carb:28, g:0.3},
{n:"Avena 100g", c:389, p:17, carb:66, g:7},
{n:"Papa 100g", c:77, p:2, carb:17, g:0.1},
{n:"Batata 100g", c:86, p:1.6, carb:20, g:0.1},
{n:"Pan blanco 100g", c:265, p:9, carb:49, g:3.2},
{n:"Pasta 100g", c:131, p:5, carb:25, g:1.1},
{n:"Quinoa 100g", c:120, p:4, carb:21, g:1.9}
],
Grasas: [
{n:"Aceite de oliva 10g", c:88, p:0, carb:0, g:10},
{n:"Manteca 10g", c:72, p:0.1, carb:0, g:8},
{n:"Palta 100g", c:160, p:2, carb:9, g:15},
{n:"Almendras 30g", c:174, p:6, carb:6, g:15},
{n:"Nueces 30g", c:196, p:4.5, carb:4, g:20},
{n:"Man√≠ 30g", c:170, p:7, carb:6, g:14},
{n:"Queso 100g", c:402, p:25, carb:1.3, g:33}
],
Frutas: [
{n:"Banana 100g", c:89, p:1.1, carb:23, g:0.3},
{n:"Manzana 100g", c:52, p:0.3, carb:14, g:0.2},
{n:"Naranja 100g", c:47, p:0.9, carb:12, g:0.1},
{n:"Frutilla 100g", c:32, p:0.7, carb:8, g:0.3},
{n:"Mango 100g", c:60, p:0.8, carb:15, g:0.4},
{n:"Anan√° 100g", c:50, p:0.5, carb:13, g:0.1},
{n:"Kiwi 100g", c:61, p:1.1, carb:15, g:0.5}
],
Vegetales: [
{n:"Br√≥coli 100g", c:34, p:2.8, carb:7, g:0.4},
{n:"Zanahoria 100g", c:41, p:0.9, carb:10, g:0.2},
{n:"Tomate 100g", c:18, p:0.9, carb:3.9, g:0.2},
{n:"Espinaca 100g", c:23, p:2.9, carb:3.6, g:0.4},
{n:"Lechuga 100g", c:15, p:1.4, carb:2.9, g:0.2},
{n:"Pepino 100g", c:16, p:0.7, carb:3.6, g:0.1},
{n:"Morr√≥n 100g", c:31, p:1, carb:6, g:0.3}
]
};

function renderAlimentosBotones(){
let html = "";
Object.keys(categorias).forEach(cat=>{
html += `<div class="card"><h3 onclick="toggleCategoria('${cat}')" style="cursor:pointer">${cat}</h3><div id="cat_${cat}" style="display:none">`;
categorias[cat].forEach((a,i)=>{
html += `<button onclick="agregarAlimentoCategoria('${cat}',${i})">${a.n}</button>`;
});
html += `</div></div>`;
});
document.getElementById("alimentosBotones").innerHTML = html;
}

function toggleCategoria(cat){
let el = document.getElementById("cat_"+cat);
el.style.display = el.style.display === "none" ? "block" : "none";
}

function agregarAlimentoCategoria(cat,index){
const base = categorias[cat][index];
let d = historial[fechaActual];
let esPor100g = base.n.includes("100g");
if(esPor100g){
let gramos = prompt("¬øCu√°ntos gramos consumiste?", "100");
if(!gramos) return;
gramos = parseFloat(gramos);
if(isNaN(gramos)||gramos<=0){alert("Cantidad inv√°lida");return;}
let factor = gramos/100;
let alimentoCalculado = {n: base.n.replace("100g", gramos+"g"), c: +(base.c*factor).toFixed(2), p: +(base.p*factor).toFixed(2), carb: +(base.carb*factor).toFixed(2), g: +(base.g*factor).toFixed(2)};
d.cal += alimentoCalculado.c; d.prot += alimentoCalculado.p; d.carb += alimentoCalculado.carb; d.grasa += alimentoCalculado.g;
d.alimentos.push(alimentoCalculado);
}else{
d.cal += base.c; d.prot += base.p; d.carb += base.carb; d.grasa += base.g;
d.alimentos.push({...base});
}
guardarTodo(); render();
}

function renderListaAlimentos(){
const lista = historial[fechaActual].alimentos;
let html="";
lista.forEach(a=>{
html += `${a.n}: ${a.c} cal, ${a.p} g prote√≠na<br>`;
});
document.getElementById("listaAlimentos").innerHTML = html;
}

/* ================== RUTINA ================== */
const rutinaSemana = {
0:["Descanso"],
1:["Press_banca","Fondos","Aperturas"],
2:["Espalda_barra","Dominadas","Remo"],
3:["Sentadilla","Prensa","Peso_muerto"],
4:["Press_militar","Elevaciones","Pajaros"],
5:["Curl_biceps","Triceps_polea","Martillo"],
6:["Full_body_ligero"]
};

function renderRutina(){
let dia = new Date(fechaActual+"T00:00:00").getDay();
if(!rutinaDia[fechaActual]) rutinaDia[fechaActual] = rutinaSemana[dia];
let rutina = rutinaDia[fechaActual] || [];
let html="";
rutina.forEach(nombre=>{
if(nombre==="Descanso"){ html+=`<div class="card">D√≠a de descanso</div>`; return;}
if(!historialEj[nombre]) historialEj[nombre]=[];
let ultimo = historialEj[nombre].slice(-1)[0];
html+=`
<div class="card">
<b>${nombre.replaceAll("_"," ")}</b><br>
<input type="number" id="peso_${nombre}" placeholder="Peso" min="0">
<input type="number" id="reps_${nombre}" placeholder="Reps" min="0">
<button onclick="guardarEjercicio('${nombre}')">Guardar</button>
<div class="small">√öltimo: ${ultimo ? ultimo.peso+"kg x "+ultimo.reps : "-"}</div>
</div>
`;
});
document.getElementById("rutinaBox").innerHTML=html;
}

function guardarEjercicio(nombre){
const peso = parseFloat(document.getElementById("peso_"+nombre).value);
const reps = parseInt(document.getElementById("reps_"+nombre).value);
if(isNaN(peso)||isNaN(reps)||peso<=0||reps<=0) return;
if(!historialEj[nombre]) historialEj[nombre]=[];
historialEj[nombre].push({fecha:fechaActual, peso, reps});
guardarTodo(); renderRutina();
}

/* ================== ESTAD√çSTICAS ================== */
function renderStats(){
let dias = Object.keys(historial);
let totalCal = dias.reduce((acc,f)=>acc+historial[f].cal,0);
let totalProt = dias.reduce((acc,f)=>acc+historial[f].prot,0);
let totalCarb = dias.reduce((acc,f)=>acc+historial[f].carb,0);
let totalGrasa = dias.reduce((acc,f)=>acc+historial[f].grasa,0);
let promedio = dias.length ? Math.round(totalCal/dias.length) : 0;
document.getElementById("estadisticasBox").innerHTML = `
D√≠as registrados: ${dias.length}<br>
Calor√≠as totales: ${totalCal}<br>
Prote√≠na total: ${totalProt} g<br>
Carbohidratos totales: ${totalCarb} g<br>
Grasas totales: ${totalGrasa} g<br>
Promedio diario: ${promedio}
`;
}

/* ================== RENDER GLOBAL ================== */
function render(){
renderResumen();
renderAlimentosBotones();
renderListaAlimentos();
renderRutina();
renderStats();
renderPeso();
}

render();

</script>
</body>
</html>
