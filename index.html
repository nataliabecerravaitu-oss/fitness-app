<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Elite Cisne</title>

<style>
body{
margin:0;
font-family:Arial;
color:gold;
background:black;
transition: background 1s ease;
}

header{
text-align:center;
padding:15px;
font-size:22px;
font-weight:bold;
border-bottom:2px solid gold;
background:rgba(0,0,0,0.7);
}

.screen{display:none;padding:20px;padding-bottom:90px;}
.active{display:block;}

.navbar{
position:fixed;
bottom:0;
width:100%;
background:#111;
display:flex;
justify-content:space-around;
padding:10px 0;
border-top:2px solid gold;
}

.navbar div{cursor:pointer;font-size:18px;}

button{
background:gold;
color:black;
border:none;
padding:6px 10px;
margin:5px 0;
border-radius:6px;
font-weight:bold;
cursor:pointer;
}

.card{
background:rgba(0,0,0,0.75);
padding:15px;
margin:10px 0;
border-radius:10px;
}
</style>
</head>

<body>

<header>ğŸ”¥ Elite Cisne</header>

<div id="inicio" class="screen active">
<h2>ğŸ  Inicio</h2>
<div id="resumenDiario" class="card"></div>
</div>

<div id="nutricion" class="screen">
<h2>ğŸ½ NutriciÃ³n</h2>
<div id="nutricionContenido"></div>
</div>

<div id="deporte" class="screen">
<h2>ğŸ‹ï¸ Plan del DÃ­a</h2>
<div id="planEntreno"></div>
</div>

<div id="estadisticas" class="screen">
<h2>ğŸ“Š EstadÃ­sticas</h2>
<div id="estadisticasContenido"></div>
</div>

<div class="navbar">
<div onclick="showScreen('inicio')">ğŸ </div>
<div onclick="showScreen('nutricion')">ğŸ½</div>
<div onclick="showScreen('deporte')">ğŸ‹ï¸</div>
<div onclick="showScreen('estadisticas')">ğŸ“Š</div>
</div>

<script>

// ===== CONFIG NUTRICION =====
let metaCalorias = 3400;
let metaProteina = 170;

let hoy = new Date();
let fecha = hoy.toISOString().split("T")[0];
let diaSemana = hoy.getDay(); // 0 domingo

let historial = JSON.parse(localStorage.getItem("eliteCisneFull")) || {};
if(!historial[fecha]){
historial[fecha]={calorias:0,proteina:0,entreno:false};
}
let datosHoy = historial[fecha];

// ===== SEMANA PARA ROTACION =====
function semanaDelAnio(d){
let inicio=new Date(d.getFullYear(),0,1);
let dias=Math.floor((d-inicio)/(24*60*60*1000));
return Math.ceil((d.getDay()+1+dias)/7);
}
let rotacion = semanaDelAnio(hoy) % 2;

// ===== RUTINA INTELIGENTE =====
const rutina = {

1:{ // Lunes
nombre:"Pecho + TrÃ­ceps",
A:["Press plano barra","Press declinado","TrÃ­ceps cuerda","Fondos"],
B:["Press mancuernas","Cruce polea","TrÃ­ceps francÃ©s","ExtensiÃ³n unilateral"]
},

2:{ // Martes
nombre:"Espalda + BÃ­ceps",
A:["Polea al pecho","Remo barra","Curl barra","Martillo"],
B:["JalÃ³n cerrado","Remo mancuerna","Curl Scott","Curl alternado"]
},

4:{ // Jueves
nombre:"Piernas + Hombros",
A:["Sentadilla","CuÃ¡driceps mÃ¡quina","Press militar","Elevaciones laterales"],
B:["Prensa","Peso muerto rumano","Press militar mancuerna","Elevaciones frontales"]
},

5:{ // Viernes
nombre:"Espalda ligera + Brazos",
A:["Trapecio barra","Remo liviano","BÃ­ceps concentrado","TrÃ­ceps polea"],
B:["JalÃ³n amplio","Remo mÃ¡quina","Curl inclinado","Patada trÃ­ceps"]
}

};

// ===== NAVEGACION =====
function showScreen(id){
document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
if(id==="nutricion") cargarNutricion();
if(id==="deporte") cargarPlan();
if(id==="estadisticas") cargarEstadisticas();
}

// ===== RESUMEN =====
function actualizarResumen(){
document.getElementById("resumenDiario").innerHTML=`
Fecha: ${fecha}<br>
CalorÃ­as: ${datosHoy.calorias}/${metaCalorias}<br>
ProteÃ­na: ${datosHoy.proteina}g/${metaProteina}g
`;
}

// ===== NUTRICION =====
function cargarNutricion(){
document.getElementById("nutricionContenido").innerHTML=`
<div class="card">
<button onclick="sumar(200,30)">+ Pollo 200g</button>
<button onclick="sumar(70,6)">+ Huevo</button>
<button onclick="sumar(300,10)">+ Fideos</button>
</div>`;
}

function sumar(cal,prot){
datosHoy.calorias+=cal;
datosHoy.proteina+=prot;
guardar();
actualizarResumen();
}

// ===== PLAN ENTRENAMIENTO =====
function cargarPlan(){

// Domingo
if(diaSemana===0){
document.getElementById("planEntreno").innerHTML=
`<div class="card">ğŸ“Š Hoy es dÃ­a de EstadÃ­stica</div>`;
return;
}

// MiÃ©rcoles
if(diaSemana===3){
document.getElementById("planEntreno").innerHTML=
`<div class="card">ğŸ›Œ Hoy toca DESCANSO</div>`;
return;
}

// SÃ¡bado
if(diaSemana===6){
document.getElementById("planEntreno").innerHTML=
`<div class="card">ğŸ«€ Cardio 20-30 minutos</div>`;
return;
}

// DÃ­as entrenamiento
let dia = rutina[diaSemana];
let lista = rotacion===0 ? dia.A : dia.B;

let html=`<div class="card"><b>${dia.nombre}</b><br><br>`;
lista.forEach(e=>{ html+=`â€¢ ${e}<br>`; });
html+=`<br><button onclick="marcarEntreno()">Marcar como completado</button></div>`;

document.getElementById("planEntreno").innerHTML=html;
}

function marcarEntreno(){
datosHoy.entreno=true;
guardar();
alert("Entrenamiento guardado ğŸ’ª");
}

// ===== ESTADISTICAS =====
function cargarEstadisticas(){
let fechas=Object.keys(historial).sort().reverse().slice(0,7);

let totalCal=0,totalProt=0,entrenos=0;

fechas.forEach(f=>{
totalCal+=historial[f].calorias||0;
totalProt+=historial[f].proteina||0;
if(historial[f].entreno) entrenos++;
});

document.getElementById("estadisticasContenido").innerHTML=`
<div class="card">
Promedio CalorÃ­as: ${Math.round(totalCal/(fechas.length||1))}<br>
Promedio ProteÃ­na: ${Math.round(totalProt/(fechas.length||1))}g<br>
Entrenamientos realizados: ${entrenos}/4
</div>`;
}

// ===== GUARDAR =====
function guardar(){
historial[fecha]=datosHoy;
localStorage.setItem("eliteCisneFull",JSON.stringify(historial));
}

// ===== FONDO SEGUN CLIMA =====
function cargarClima(){
if(!navigator.geolocation) return;

navigator.geolocation.getCurrentPosition(pos=>{
let lat=pos.coords.latitude;
let lon=pos.coords.longitude;

fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`)
.then(res=>res.json())
.then(data=>{
let temp=data.current_weather.temperature;

if(temp<10){
document.body.style.background="linear-gradient(#001f3f, black)";
}else if(temp<25){
document.body.style.background="linear-gradient(#003300, black)";
}else{
document.body.style.background="linear-gradient(#660000, black)";
}
});
});
}

actualizarResumen();
cargarClima();

</script>
</body>
</html>
